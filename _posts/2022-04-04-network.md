---
layout: post
title: 네트워크 TCP/IP 개념 정리
subtitle:
header-style: text
author: Juri
tags:
    - network
---

참고: 책 TCP/IP가 보이는 그림책 , 성안당

프로그래밍을 공부하기 위해 대규모의 스터디를 만들었다고 치자. 스터디의 회원이 되는 많은 사람들이 정보를 효과적으로 주고받기 위해서는 운영상의 규칙이 필요할 것이다. 이와 마찬가지로 컴퓨터 네트워크 상에서 주고받기를 원활하게 수행하기 위해 고안한 규칙이 **TCP와 IP**라고 할 수 있다.

## 프로토콜 Protocol

프로토콜을 직역하면 **의정서**, 서로 다른 국가 간에 교환한 합의 문서로 국가끼리 교류하기 위한 정해진 규칙이라고 할 수 있다. 국가를 **컴퓨터**로 바꿔 생각하면 쉽게 이해할 수 있다. 기기끼리 통신할 때 필요한 일련의 절차를 프로토콜이라고 하며 몇 개의 프로토콜에 의해 주고받기가 이루어진다. TCP와IP는 현재 가장 많이 사용하고 있는 프로토콜군이다.

## TCP/IP

### 탄생배경

TCP/IP는 1960년대 미국 국방성이 개발을 지원한 ARPANET이라는 네트워크 상에서 사용할 프로토콜로 개발되었다. ARPANET처럼 여러 개의 LAN을 연결하는 경우에는 통신 방법을 통일할 필요가 있었다.

컴퓨터 간에 데이터를 주고 받을 때, 케이블이나 전파, 적외선을 통해 데이터를 보내려면 모든 데이터를 **전기신호**나 **광신호**로 변환한다. 데이터를 받을 때는 이 신호를 다시 원래의 형태로 변환하는 작업이 필요하다. 이 때 신호를 어떻게 변환했는지를 모르면 원래대로 되돌릴 수가 없다. 따라서, **신호로 변환 -> 전달 -> 데이터 재변환** 이라는 일련의 흐름을 통일시킨 절차를 기본으로 수행되는 **TCP/IP** 구조가 생겨난 것이다.

### 계층화

TCP/IP는 송수신에 필요한 작업을 5개의 단계로 나눠 수행한다. 위로 갈수록 사용자와 가까운 작업을, 아래로 갈수록 기계와 가까운 작업을 담당한다.

| 계층           | 프로토콜                 | 설명                                                                     |
| -------------- | ------------------------ | ------------------------------------------------------------------------ |
| 애플리케이션층 | HTTP, SMTP, POP3, FTP .. | 애플리케이션에 맞춰 통신을 수행할 수 있도록 한다.                        |
| 트랜스포트층   | TCP UDP                  | 송신되는 데이터를 수신측 애플리케이션에 확실하게 전달하기 위해 작동한다. |
| 네트워크층     | IP                       | 수신측 컴퓨터까지 데이터를 전달하기 위해 작동한다.                       |
| 데이터 링크층  | Ethernet, FDDI, ATM ..   | 네트워크에 직접 연결된 기기 간의 전송을 수행한다.                        |
| 물리층         |                          | 데이터를 신호로, 신호를 데이터로 변환한다.                               |

일반적으로 TCP/IP라고 하면 이 5계층 전체를 가리킨다.

### 계층간 연락 방법

송신측의 각 계층에서 수신측의 동일한 계층에서 필요한 정보를 공통된 서식으로 데이터에 추가한다. 데이터보다 앞에 추가한 정보를 **헤더**, 뒤에 추가한 정보를 **트레일러**라고 한다.

상위층에서 추가된 헤더와 트레일러는 캡슐화되어 다른 계층에서 볼 수 없기 때문에 송신측의 각 계층에서 추가된 헤더와 트레일러는 수신측의 동일한 계층에서만 사용할 수 있다.

### 데이터 송수신 단계

(송신)

| 계층           | 작업                                                                             |
| -------------- | -------------------------------------------------------------------------------- |
| 애플리케이션층 | 애플리케이션 간에 데이터를 주고받기 위해 필요한 정보를 써 넣는다.                |
| 트랜스포트층   | 애플리케이션을 나타내는 번호와 데이터를 조합하기 위한 정보를 써 넣는다.          |
| 네트워크층     | 송수신할 컴퓨터의 주소와 수신 불명인 경우 데이터를 파기하는 표시 등을 써 넣는다. |
| 데이터 링크층  | 네트워크의 종류에 맞춘 형식으로 보낼 곳의 정보 등을 써 넣는다.                   |
| 물리층         | 비트열을 신호로 변환한다.                                                        |

(수신)

| 계층           | 작업                                                               |
| -------------- | ------------------------------------------------------------------ |
| 물리층         | 신호를 비트열로 변환한다.                                          |
| 데이터 링크층  | 헤더에 적힌 정보를 확인하고 지정된 프로토콜에 전달한다.            |
| 네트워크층     | 헤더에 적힌 수신처가 맞는지 확인하고 지정된 프로토콜에게 전달한다. |
| 트랜스포트층   | 헤더를 확인하고 데이터를 순서대로 나열해서 조합한다.               |
| 애플리케이션층 | 지정된 애플리케이션에게 전달한다.                                  |

### 패킷통신

TCP/IP에서는 데이터를 일정한 크기로 분할해서 송수신하는 패킷 교환이라는 방법으로 주고받기를 수행한다.

(송신)

1. 데이터를 패킷으로 나눈다.
2. 각 패킷에 수신처나 원래대로 되돌리기 위한 번호 등 필요한 정보를 추가한다.
3. 회선을 사용하여 데이터를 송신한다.

(수신)

1. 자기 앞으로 온 데이터만 받는다.
2. 헤더 정보를 기초로 해서 데이터를 되돌린다.
3. 손상되어 있으면 해당 패킷만 다시 받는다.
4. 데이터를 원래대로 되돌린다.

## 애플리케이션층

컴퓨터끼리의 주고받기를 사용자가 이용할 수 있는 **통신 서비스**라는 형태로 만드는 역할이다.

### HTTP 프로토콜

HTTP 프로토콜은 하나의 요청에 대해 하나의 응답을 반환하는 아주 간단한 프로토콜이다. 실제로 페이지를 구성하고 있는 파일수만큼 이 작업을 반복한다. HTTP 프로토콜에서는 **요청**과 **응답**이라는 두 종류의 패킷을 사용하여 텍스트 형식으로 주고받기를 수행한다.

HTTP 프로토콜은 한 번의 요청과 응답으로 통신은 완결되고 과거에 수행한 통신과 독립된다. 이렇게 한 번으로 끝나는 프로토콜을 무상태(stateless) 라고 한다.
